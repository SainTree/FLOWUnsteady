<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>First Steps · FLOWUnsteady</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="FLOWUnsteady logo"/></a><div class="docs-package-name"><span class="docs-autofit">FLOWUnsteady</span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Reference</span><ul><li><a class="tocitem" href="../../reference/FLOWVLM/">FLOWVLM</a></li><li><a class="tocitem" href="../../reference/VPM/">Vortex Particle Method</a></li><li><a class="tocitem" href="../../reference/FLOWUnsteady/">FLOWUnsteady</a></li></ul></li><li><span class="tocitem">Tutorials</span><ul><li class="is-active"><a class="tocitem" href>First Steps</a><ul class="internal"><li><a class="tocitem" href="#Geometry-Basics-1"><span>Geometry Basics</span></a></li><li><a class="tocitem" href="#Adding-a-Rotor-1"><span>Adding a Rotor</span></a></li><li><a class="tocitem" href="#Other-Systems-1"><span>Other Systems</span></a></li><li><a class="tocitem" href="#Kinematic-Maneuvers-1"><span>Kinematic Maneuvers</span></a></li><li><a class="tocitem" href="#Setting-up-a-Basic-Simulation-1"><span>Setting up a Basic Simulation</span></a></li></ul></li></ul></li><li><span class="tocitem">How-to-Guide</span><ul><li><a class="tocitem" href="../../how-to-guide/getting-started/">Getting Started</a></li><li><a class="tocitem" href="../../how-to-guide/paraview-visualization/">Visualize with Paraview</a></li><li><a class="tocitem" href="../../how-to-guide/defining-systems/">Define Systems</a></li><li><a class="tocitem" href="../../how-to-guide/define-a-rotor/">Define a Rotor</a></li><li><a class="tocitem" href="../../how-to-guide/define-kinematic-maneuvers/">Define Kinematic Maneuvers</a></li><li><a class="tocitem" href="../../how-to-guide/select-a-solver/">Select a Solver</a></li><li><a class="tocitem" href="../../how-to-guide/calculate-aerodynamic-forces/">Calculate Aerodynamic Forces</a></li><li><a class="tocitem" href="../../how-to-guide/set-up-runtime-functions/">Set up run-time Functions</a></li><li><a class="tocitem" href="../../how-to-guide/set-up-monitors/">Set up run-time Monitors</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Tutorials</a></li><li class="is-active"><a href>First Steps</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>First Steps</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/byuflowlab/FLOWUnsteady/blob/master/docs/src/tutorials/first-steps.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="First-Steps-1"><a class="docs-heading-anchor" href="#First-Steps-1">First Steps</a><a class="docs-heading-anchor-permalink" href="#First-Steps-1" title="Permalink"></a></h1><h2 id="Geometry-Basics-1"><a class="docs-heading-anchor" href="#Geometry-Basics-1">Geometry Basics</a><a class="docs-heading-anchor-permalink" href="#Geometry-Basics-1" title="Permalink"></a></h2><p>In this tutorial, we&#39;ll begin by defining the geometry for a simple wing.  Note that all the functions used are described in the Reference section of this documentation if you would like further information at any point.  Before you begin this tutorial, it is expected that you&#39;ve already installed the necessary components of FLOWUnsteady, and that you are familiar with visualization in Paraview.</p><p>First things first, we need to include the FLOWUnsteady components</p><pre><code class="language-none">import FLOWUnsteady
uns = FLOWUnsteady
vlm = uns.vlm</code></pre><p>Let&#39;s begin with a single section, symmetric wing.  We&#39;ll start by defining some basic geometry.</p><pre><code class="language-none">span = 1.0              #wing span
aspectratio = 10.0      #wing aspect ratio
taperratio = 0.5        #wing taper ratio
wingtwist = 0.0         #wing twist
wingsweep = 10.0        #wing sweep in degrees
wingdihedral = 7.0      #wing dihedral in degrees</code></pre><p>Then we&#39;ll call the <code>simpleWing()</code> function to create a simple wing object.</p><pre><code class="language-">mainwing = vlm.simpleWing(span,aspectratio,taperratio,wingtwist,wingsweep,wingdihedral)</code></pre><p>Congratulations! You&#39;ve created your first wing object.</p><div class="admonition is-info"><header class="admonition-header">Exploring wing objects</header><div class="admonition-body"><p>If you want, you can take a moment to explore the contents of your newly created <code>mainwing</code>.  You can do so using <code>fieldnames(mainwing)</code> and poking around. The Reference section will have more info on the contents of the wing object.</p></div></div><p>Next, let&#39;s create a wing system.</p><pre><code class="language-">system = vlm.WingSystem()</code></pre><p>You now have an empty wing system, so let&#39;s add our mainwing object to it with the name &quot;mainwing.&quot;</p><pre><code class="language-">vlm.addwing(system,&quot;mainwing&quot;,mainwing)</code></pre><p>Now that we have a wing system, let&#39;s save it as a .vtk file so we can view it in paraview.  In order to do so, we are required to define a freestream velocity.</p><pre><code class="language-">Vinf(x,t) = [1,0,0]         #non-dimensional function defining free stream velocity
vlm.setVinf(system, Vinf)   #set freestream velocity for the system</code></pre><p>We will also want to set some parameters for saving files and set up our file system to put the files where we want.</p><div class="admonition is-danger"><header class="admonition-header">Be careful with rm</header><div class="admonition-body"><p>Make sure you have set your save_path to something non-important so the <code>rm</code> command doesn&#39;t delete anything you&#39;ll miss.</p></div></div><pre><code class="language-julia">run_name = &quot;tutorial&quot;           #define identifier at beginning of file names
save_path = &quot;./simplewing/&quot;     #define directory where files will be saved

run(`rm -rf $save_path`)        #clear out directory where files will be saved
run(`mkdir $save_path`)         #re-create directory fresh</code></pre><pre><code class="language-none">Process(`mkdir ./simplewing/`, ProcessExited(0))</code></pre><p>Finally, we can save the files.</p><pre><code class="language-none">vlm.save(system, run_name; path=save_path)  #save geometry in a .vtk file format</code></pre><p>And now we can view our wing in Paraview using the command <code>run(`paraview --data=&quot;$(save_path)/$(run_name)_mainwing_vlm.vtk&quot;`)</code> (assuming you&#39;ve set up an alias for paraview on your computer).</p><p><img src="../../assets/tutorialfigs/geometry-basics.gif" alt="alt text"/></p><h2 id="Adding-a-Rotor-1"><a class="docs-heading-anchor" href="#Adding-a-Rotor-1">Adding a Rotor</a><a class="docs-heading-anchor-permalink" href="#Adding-a-Rotor-1" title="Permalink"></a></h2><p>Now that we have a basic wing, let&#39;s go ahead and add a rotor.  We&#39;ll use some data for the rotor that already exists in FLOWUnsteady.  You can visit the How-to guides for more information on creating your own rotor database.</p><pre><code class="language-none">rotor_file = &quot;apc10x7.csv&quot;          # Rotor geometry
data_path = uns.def_data_path       # Path to rotor database</code></pre><p>With the rotor data, we can generate our rotor. This might take a minute or so to run. We supress the output here with a semi-colon as it prints a large output.</p><pre><code class="language-">rotor_file = &quot;apc10x7.csv&quot;          # hide
data_path = uns.def_data_path       # hide
rotor = uns.generate_rotor(rotor_file; pitch=0.0,
                                            n=10, CW=true, ReD=1.5e6,
                                            verbose=true, xfoil=true,
                                            data_path=data_path,
                                            plot_disc=false);</code></pre><p>And then we can generate a rotor object, where we again supress the output.</p><pre><code class="language-">rotors = vlm.Rotor[rotor];</code></pre><p>This will put the rotor at the default location and orientation which we will define here since we now need to move the rotor relative to the wing which is already at this location.</p><pre><code class="language-julia">vehicleorigin = [0.0; 0.0; 0.0]
vehicleaxis = [1.0 0.0 0.0; 0.0 1.0 0.0; 0.0 0.0 1.0]</code></pre><pre><code class="language-none">3×3 Array{Float64,2}:
 1.0  0.0  0.0
 0.0  1.0  0.0
 0.0  0.0  1.0</code></pre><p>To move the rotor, we need to define a new origin point.</p><pre><code class="language-julia">rotororigin = [-0.1; 0.0; 0.0]</code></pre><pre><code class="language-none">3-element Array{Float64,1}:
 -0.1
  0.0
  0.0</code></pre><p>Then we can use that origin to set the rotor coordinate system in order to move the rotor.</p><pre><code class="language-">for rotor in rotors
    vlm.setcoordsystem(rotor, rotororigin, vehicleaxis; user=true)
end</code></pre><p>which we can put in a tuple that stores our rotor system(s).</p><pre><code class="language-">rotor_systems = (rotors,);</code></pre><p>We also need to add it to our overall system.</p><pre><code class="language-">for rotor in rotors; vlm.addwing(system, run_name, rotor); end;</code></pre><p>Like setting the Vinf parameter for the main wing, we need to give our rotor an RPM as well.</p><pre><code class="language-">RPMref = 6000       #reference RPM
for rotor in rotors; vlm.setRPM(rotor, RPMref); end;</code></pre><p>We should now be able to visualize our wing with a rotor.</p><pre><code class="language-none">run(`rm -rf $save_path`)
run(`mkdir $save_path`)

vlm.save(system, run_name; path=save_path)
run(`paraview --data=&quot;$(save_path)/tutorial_mainwing_vlm.vtk;tutorial_tutorial_Blade1_vlm.vtk;tutorial_tutorial_Blade2_vlm.vtk;tutorial_tutorial_Blade1_loft.vtk;tutorial_tutorial_Blade2_loft.vtk;&quot;`)</code></pre><p><img src="../../assets/tutorialfigs/add-rotor.gif" alt="alt text"/></p><h2 id="Other-Systems-1"><a class="docs-heading-anchor" href="#Other-Systems-1">Other Systems</a><a class="docs-heading-anchor-permalink" href="#Other-Systems-1" title="Permalink"></a></h2><p>In order run an analysis with our little airplane, we&#39;re going to have to add a few more systems</p><h3 id="VLM-Systems-1"><a class="docs-heading-anchor" href="#VLM-Systems-1">VLM Systems</a><a class="docs-heading-anchor-permalink" href="#VLM-Systems-1" title="Permalink"></a></h3><p>First let&#39;s create a VLM system and add our main wing to it.</p><pre><code class="language-">vlm_system = vlm.WingSystem()

vlm.addwing(vlm_system, &quot;mainwing&quot;, mainwing)</code></pre><h3 id="Wake-Systems-1"><a class="docs-heading-anchor" href="#Wake-Systems-1">Wake Systems</a><a class="docs-heading-anchor-permalink" href="#Wake-Systems-1" title="Permalink"></a></h3><p>Next, let&#39;s create a wake system and add both the VLM system and rotor.</p><pre><code class="language-">wake_system = vlm.WingSystem()

vlm.addwing(wake_system, &quot;SolveVLM&quot;, vlm_system)

for rotor in rotors; vlm.addwing(wake_system, run_name, rotor); end;</code></pre><h3 id="Tilting-Systems-1"><a class="docs-heading-anchor" href="#Tilting-Systems-1">Tilting Systems</a><a class="docs-heading-anchor-permalink" href="#Tilting-Systems-1" title="Permalink"></a></h3><p>We&#39;ll also need to identify tilting objects, but since we don&#39;t have any tilting components yet, we&#39;ll just initialize an empty tuple. For more information on adding tilting objects (like control surfaces, or tilt-wings) see <a href="../../how-to-guide/defining-systems/#Define-Systems-1">Define Systems</a>.</p><pre><code class="language-julia">tilting_systems = ();</code></pre><pre><code class="language-none">()</code></pre><h2 id="Kinematic-Maneuvers-1"><a class="docs-heading-anchor" href="#Kinematic-Maneuvers-1">Kinematic Maneuvers</a><a class="docs-heading-anchor-permalink" href="#Kinematic-Maneuvers-1" title="Permalink"></a></h2><p>Now let&#39;s define our maneuver. For now, let&#39;s just have the airplane fly in a straight and level. We are going to have to define non-dimensional functions for the velocity for the vehicle, the angle for the vehicle, the angles for our tilting systems, and the rotation rate for the rotor(s).</p><div class="admonition is-info"><header class="admonition-header">Non-dimensionalized Functions</header><div class="admonition-body"><p>The functions that define the kinematic maneuver must be defined non-dimensionally. For more information on this, see <a href="../../how-to-guide/define-kinematic-maneuvers/#Define-Kinematic-Maneuvers-1">Define Kinematic Maneuvers</a>.</p></div></div><p>We&#39;ll start with the vehicle velocity function.</p><pre><code class="language-julia">Vvehicle(t) = [-1.0,0.0,0.0]</code></pre><pre><code class="language-none">Vvehicle (generic function with 1 method)</code></pre><p>Next, let&#39;s define the vehicle angle.</p><pre><code class="language-julia">anglevehicle(t) = zeros(3)</code></pre><pre><code class="language-none">anglevehicle (generic function with 1 method)</code></pre><p>Now the angle of the titling systems (we don&#39;t have any, so it&#39;s just empty again).</p><pre><code class="language-julia">angle = ();</code></pre><pre><code class="language-none">()</code></pre><p>Lastly, we need to define a rotation rate function for each of the rotors.</p><pre><code class="language-julia">RPM_fun(t) = 1.0

RPM = (RPM_fun, )</code></pre><pre><code class="language-none">(Main.##ex-#402.RPM_fun,)</code></pre><p>With all the individual elements defined, we can create a maneuver</p><pre><code class="language-">maneuver = uns.KinematicManeuver(angle, RPM, Vvehicle, anglevehicle)</code></pre><p>We can also plot the maneuver to quickly see what we made.</p><pre><code class="language-">uns.plot_maneuver(maneuver)</code></pre><p>A plot of the maneuver is helpful, but visualizing in Paraview can also be helpful. In order to do that, however, we first need to set up a simulation.</p><h2 id="Setting-up-a-Basic-Simulation-1"><a class="docs-heading-anchor" href="#Setting-up-a-Basic-Simulation-1">Setting up a Basic Simulation</a><a class="docs-heading-anchor-permalink" href="#Setting-up-a-Basic-Simulation-1" title="Permalink"></a></h2><p>We already have most of the elements we need to define a simulation, but need to create a vehicle to be used in the simulation with the systems we&#39;ve already defined.</p><pre><code class="language-">vehicle = uns.VLMVehicle(   system;
                            tilting_systems = tilting_systems,
                            rotor_systems   = rotor_systems,
                            vlm_system      = vlm_system,
                            wake_system     = wake_system,
                        );</code></pre><p>In addition, we still need to define a reference velocity, the total time for the simulation, and a few initial conditions.</p><pre><code class="language-">Vref = 10.0         #define a reference velocity for the vehicle
ttot = 1.0          #define a total simulation time, in seconds
nsteps = 300        #define the number of steps the simulation will take

#initial conditions
tinit = 0.0                                  #initial time
Vinit = Vref*maneuver.Vvehicle(tinit/ttot)   #initial linear velocity
Winit = zeros(3)                             #initial angular velocity</code></pre><p>With everything now defined, we can create a simulation</p><pre><code class="language-">simulation = uns.Simulation(vehicle, maneuver, Vref, RPMref, ttot; Vinit=Vinit, Winit=Winit, t=tinit);</code></pre><p>Finally, we can visualize the maneuver in Paraview.</p><p>```@example tut filenames = uns.visualize<em>kinematics(   simulation, nsteps, save</em>path;                                         run<em>name=run</em>name,                                         prompt=false,                                         paraview=false                                     )</p><p>run(<code>paraview --data=&quot;$save_path/$filenames&quot;</code>)  ```</p><p><img src="../../assets/tutorialfigs/kinematic-maneuver.gif" alt="alt text"/></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../reference/FLOWUnsteady/">« FLOWUnsteady</a><a class="docs-footer-nextpage" href="../../how-to-guide/getting-started/">Getting Started »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Tuesday 9 June 2020 14:19">Tuesday 9 June 2020</span>. Using Julia version 1.3.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
